# Control plane settings
kube_apiserver_bind_address: 0.0.0.0
kube_apiserver_port: "{{ api_server_port }}"
kube_apiserver_args:
  - --etcd-servers=https://{{ kubernetes_public_address }}:2379
  - --etcd-cafile={{ paths.kubernetes.pki_dir }}/ca.pem
  - --etcd-certfile={{ paths.kubernetes.pki_dir }}/apiserver-etcd-client.pem
  - --etcd-keyfile={{ paths.kubernetes.pki_dir }}/apiserver-etcd-client-key.pem
  - --client-ca-file={{ paths.kubernetes.pki_dir }}/ca.pem
  - --service-account-key-file={{ paths.kubernetes.pki_dir }}/sa.pub
  - --service-account-signing-key-file={{ paths.kubernetes.pki_dir }}/sa-key.pem
  - --service-account-issuer=https://kubernetes.default.svc.cluster.local
  - --tls-cert-file={{ paths.kubernetes.pki_dir }}/apiserver.pem
  - --tls-private-key-file={{ paths.kubernetes.pki_dir }}/apiserver-key.pem
  - --service-cluster-ip-range={{ service_cidr }}
  - --encryption-provider-config={{ paths.kubernetes.config_dir }}/encryption-config.yaml

kube_controller_manager_args:
  - --cluster-signing-cert-file={{ paths.kubernetes.pki_dir }}/ca.pem
  - --cluster-signing-key-file={{ paths.kubernetes.pki_dir }}/ca-key.pem
  - --service-account-private-key-file={{ paths.kubernetes.pki_dir }}/sa-key.pem
  - --root-ca-file={{ paths.kubernetes.pki_dir }}/ca.pem

kube_scheduler_args:
  - --authentication-kubeconfig={{ paths.kubernetes.config_dir }}/kube-scheduler.kubeconfig
  - --authorization-kubeconfig={{ paths.kubernetes.config_dir }}/kube-scheduler.kubeconfig
